# 资产授权
## 1 功能简介
!!! tip "资产的授权规则通过以下几个维度确定用户能使用那种协议、哪些账号访问哪些资产并且拥有什么样的权限。维度分别如下:"
    - 用户：用户维度主要包括用户与用户组（代表该用户组下所有的用户）；
    - 资产：资产维度主要包括资产、节点（资产组的概念，代表该节点下的所有资产）、账号（登录资产的账号）；
    - 账号：账号维度主要区分用户可以用哪些账号登录资产。
    - 协议：协议维度主要区分用户登录资产可以使用的协议。
    - 动作：动作维度主要包括连接权限、上传、下载、删除权限、复制粘贴权限（仅支持 RDP 协议和 VNC 协议）。

!!! tip ""
    **点击资产授权页面的 `创建` 按钮，即进入资产授权创建页面。填写授权规则信息并提交。**
    ![V4_authorization_1](../../../../img/V4_authorization_1.png)

!!! tip ""
    详细参数说明：

| 参数       | 说明                                                                 |
|------------|--------------------------------------------------------------------|
| 名称       | 授权规则的名称。                                                   |
| 用户       | JumpServer 登录用户，即给该用户授权资产的连接或其它权限。           |
| 用户组     | JumpServer 登录用户组，即给该用户组授权资产的连接或其它权限。       |
| 资产       | 授权的资产，即用户需要连接的资产。                                 |
| 节点       | 授权的节点，即用户需要连接的资产组。                               |
| 账号       | 授权资产登录的账号，支持以下类型：<br/>• **所有账号**：资产上添加的所有账号都授权<br/>• **指定账号**：手动输入需要授权的账号名称<br/>• **虚拟账号**：<br/>&nbsp;&nbsp;◦ **手动账号**：授权用户连接时自行输入用户名/密码<br/>&nbsp;&nbsp;◦ **同名账号**：授权用户连接时使用与 JumpServer 登录用户同名的账号<br/>&nbsp;&nbsp;◦ **匿名账号**：授权用户连接时不代填任何认证信息，仅拉起应用本身（适用于 Web 和自定义类型的资产） |
| 协议       | 授权用户可用的协议，支持以下类型：<br/>• **所有**：用户可以使用堡垒机支持的任意协议登录资产<br/>• **指定协议**：用户可以使用指定协议登录资产 |
| 动作       | 授权的动作，即用户对资产可以执行的操作。包括连接权限、上传下载权限、剪切板权限（仅支持 RDP/VNC 协议）、SSH 协议会话分享等。 |
| 开始日期   | 该授权规则开始的时间，默认为该授权规则创建的时间。                 |
| 失效日期   | 该授权规则失效的时间。                                             |

## 2 授权逻辑说明
!!! info ""
    - **组合授权规则**：同时选择用户和用户组时，两者中的所有用户都会生效；同时选择资产和节点时，两者中的所有资产都会生效，采用"和"关系进行授权。
    - **空选项规则**：如果授权规则中的任一必填模块（用户/用户组、资产/节点、账号等）为空，该授权规则将不会生效。
    - **通配符限制**：授权规则 **不支持** 使用 `*` 进行全匹配操作。

## 3 授权案例

### 3.1 单用户单资产授权

!!! tip "当需求仅给某个用户授权某资产时："
    - 选择将 **用户模块** 中的 `用户` 选项选择为需要授权的用户，`用户组` 选项置空；
    - 选择将 **资产模块** 中的 `资产` 选项为需要登录的资产，`节点` 选项为空， `账号` 选择授权的账号，示例选择 `所有账号`。
  
!!! tip ""
    - 授权规则如下：
    ![V4_authorization_2](../../../../img/V4_authorization_2.png)

### 3.2 用户组单资产授权
!!! tip "当针对与允许某个用户组登录一个资产时："
    - 选择将 **用户模块** 中 `用户组` 选项选择为需要授权的用户组，`用户` 选项为空；
    - 将 **资产模块** 中的 `资产` 选项选择为需要登录的资产，`节点` 选项为空，`账号` 选择授权的账号，示例选择 `所有账号`。

!!! tip ""
    - 授权规则如下：
    ![V4_authorization_5](../../../../img/V4_authorization_5.png)

### 3.3 单用户节点授权
!!! tip "当针对与允许某个用户登录某一组资产时："
    - 选择将 **用户模块** 中 `用户` 选项选择为需要授权的用户，`用户组` 选项为空；
    - 将 **资产模块** 中的 `节点` 选项选择为需要登录的资产组，`资产` 选项为空，`账号` 选择授权的账号，示例选择 `所有账号`。

!!! tip ""
    - 授权规则如下：
    ![V4_authorization_8](../../../../img/V4_authorization_8.png)

### 3.4 用户组节点授权
!!! tip "当允许某个用户组登录某一组资产时："
    - 选择将 **用户模块** 中 `用户组` 选项选择为需要授权的用户组，`用户` 选项为空；
    - 将 **资产模块** 中的 `节点` 选项选择为需要登录的资产组，`资产` 选项为空，`账号` 选择授权的账号，示例选择 `所有账号`。

!!! tip ""
    - 授权规则如下：
    ![V4_authorization_10](../../../../img/V4_authorization_10.png)


